<div>
    <div class="row p-2 pb-0">
        <div class="col">
            <div class="d-flex justify-content-between">
                <div class="h4 mb-0">{{ name }}</div>
                <button (click)="cancel()"
                        aria-label="Close"
                        class="btn-close text-bg-secondary"
                        type="button"></button>
            </div>
        </div>
    </div>
    <div class="row p-2 pt-0">
        <div class="col">
            <div class="col align-content-end d-flex justify-content-end">
                <button (click)="filter()" class="btn btn-primary btn-block btn-sm">
                    Go
                </button>
                <button (click)="filterVisible = !filterVisible" class="btn btn-sm px-3">
                    {{ filterVisible ? 'Hide' : 'Show' }} Filters
                </button>
            </div>
        </div>
    </div>
    <div *ngIf="filterVisible" class="row p-2 pt-0 row-cols-auto">
        <div *ngFor="let col of columns; " class="col">
            <label class="col-sm-4 col-form-label pt-0">{{ col.label }}</label>
            <div class="input-group-sm input-group">
                <input [(ngModel)]="filters[col.name]"
                       class="col-sm-8 form-control form-control-sm"
                       type="text">
                <button aria-expanded="false"
                        class="btn btn-outline-secondary dropdown-toggle"
                        data-bs-toggle="dropdown" id="{{col.label}}_ddtgl"
                        ngbDropdown ngbDropdownToggle type="button">
                    [=]
                </button>
                <ul [attr.aria-labelledby]="col.label + '_ddtgl'" class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="#">[=]</a></li>
                    <li><a class="dropdown-item" href="#">[>]</a></li>
                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                    <li>
                        <hr class="dropdown-divider">
                    </li>
                    <li><a class="dropdown-item" href="#">Separated link</a></li>
                </ul>
            </div>

        </div>
    </div>
    <div class="row">
        <div class="col">
            <p-table
                [(selection)]="selectedItem"
                [scrollable]="true"
                (onLazyLoad)="lazyLoad($event)"
                [dataKey]="idField"
                [lazy]="true"
                [rowHover]="true"
                [value]="filteredRow"
                selectionMode="{{ multi ? 'multiple' : 'single' }}"
                [virtualRowHeight]="40"
                [virtualScroll]="true"
                scrollHeight="65vh"
                styleClass="p-datatable-gridlines p-datatable-sm"
            >
                <!--                <ng-template pTemplate="caption">-->

                <!--                </ng-template>-->
                <ng-template pTemplate="header">
                    <tr style="height:40px">
                        <th style="max-width:40px">
                            <p-tableHeaderCheckbox *ngIf="multi"></p-tableHeaderCheckbox>
                        </th>
                        <th *ngFor="let col of columns">
                            {{ col.label }}
                        </th>
                    </tr>
                </ng-template>
                <ng-template let-row let-rowIndex="rowIndex" pTemplate="body">
                    <tr [pSelectableRow]="row">
                        <td style="max-width:40px">
                            <p-tableCheckbox [value]="row"></p-tableCheckbox>
                        </td>
                        <ng-container *ngTemplateOutlet="body; context: {$implicit: row}"></ng-container>
                    </tr>
                </ng-template>
                <ng-template pTemplate="loadingbody">
                    <tr style="height:40px">
                        <td *ngFor="let col of columns">
                            <div class="loading-text"></div>
                            <p-skeleton [ngStyle]="{'width': '100%'}"></p-skeleton>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="footer">

                </ng-template>
            </p-table>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <div class="gap-2 p-2 justify-content-end d-flex">
                <button (click)="clear()" class="btn btn-outline-secondary btn-block btn-sm">
                    Clear
                </button>
                <button (click)="confirm()" class="btn btn-primary btn-block btn-sm">
                    Select
                </button>
            </div>
        </div>
    </div>
</div>

