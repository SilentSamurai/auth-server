<div class="container">
    <div class="row align-items-center">
        <div class="md:col-12 vh-100">
            <div *ngIf="loading" class="align-middle text-center" style="padding-top:25%">
                <div class="spinner-border m-5" role="status">
                    <span class="sr-only">Loading...</span>
                </div>
            </div>
            <div *ngIf="!loading" class="card card-container p-fluid">
                <img
                    alt=""
                    class="profile-img-card"
                    id="profile-img"
                    src="/assets/logo-img.jpg"/>
                <form
                    #f="ngForm"
                    (ngSubmit)="f.form.valid && onSubmit()"
                    *ngIf="!isLoggedIn"
                    name="form"
                    novalidate
                >
                    <div class="field">
                        <label for="email" htmlFor="email">Email</label>
                        <input class=""
                               #username="ngModel"
                               [(ngModel)]="form.email"
                               pInputText
                               id="email"
                               name="email"
                               required
                               type="text"/>
                        <div
                            *ngIf="username.errors && f.submitted"
                            class="alert alert-danger"
                            role="alert"
                        >
                            Email is required!
                        </div>
                    </div>
                    <div class="field">
                        <label for="password">Password</label>
                        <input class=""
                               #password="ngModel"
                               [(ngModel)]="form.password"
                               pInputText
                               id="password"
                               minlength="6"
                               name="password"
                               required
                               type="password"/>
                        <div
                            *ngIf="password.errors && f.submitted"
                            class="alert alert-danger"
                            role="alert"
                        >
                            <div *ngIf="password.errors['required']">Password is required</div>
                            <div *ngIf="password.errors['minlength']">
                                Password must be at least 6 characters
                            </div>
                        </div>
                    </div>

                    <div class="field">
                        <label for="domain">Domain</label>
                        <input class=""
                               #domain="ngModel"
                               [(ngModel)]="form.domain"
                               [disabled]="freezeDomain"
                               pInputText
                               id="domain"
                               minlength="6"
                               name="domain"
                               required
                               type="text"/>
                        <div
                            *ngIf="domain.errors && f.submitted"
                            class="alert alert-danger"
                            role="alert"
                        >
                            <div *ngIf="domain.errors['required']">Domain is required</div>
                            <div *ngIf="domain.errors['minlength']">
                                Password must be at least 6 characters
                            </div>
                        </div>
                    </div>

                    <div class="field mt-4">
                        <button label="Login" pButton></button>
                    </div>
                    <div class="field">
                        <div
                            *ngIf="f.submitted && isLoginFailed"
                            class="alert alert-danger"
                            role="alert"
                        >
                            Login failed: {{ errorMessage }}
                        </div>
                    </div>
                </form>

                <div *ngIf="isLoggedIn" class="alert alert-success">
                    Logged in as {{ scopes }}.
                </div>

                <p-divider></p-divider>
                <div class="d-flex justify-content-evenly">
                    <a class="mt-1 " href="https://silentsamurai.github.io/auth-server">
                        Api Docs
                    </a>
                    <a class=" mt-1" href="javascript:void(0)" routerLink="/register">
                        Sign Up
                    </a>
                </div>

            </div>
        </div>
    </div>
</div>

